LTE家庭基站的节能技术研究
===


# 摘要

在现代移动通信发展中，LTE(Long term Evoluntion)由于速度和稳定性的提升，成为了人们现在最常用的技术，给人们的生产生活带来了极大的提升。在LTE标准化的整体进程中，LTE家庭基站应运而生，与传统的蜂窝网络形成了优势互补，由于其极大的灵活性和低功耗、配置灵活的特点，迅速在通信行业中得到了重视，成为人们在家庭通信场景中常见的设备。而由于通信领域中常见的潮汐效应，全天候全功率开放的家庭基站虽然为人们的通信质量带来了提升，但也造成了资源的极大浪费。本文通过对LTE技术、家庭基站设备的原理研究，提出了一种基于BP神经网络的智能休眠算法，实现了资源的最大化节省，同时也保证了用户的通信质量。

# ABSTRACT

In the development of modern mobile communication, LTE (Long term Evoluntion) has become the most commonly used technology by people due to the improvement of speed and stability, which has greatly improved people's production and life. In the overall process of LTE standardization, LTE home technology emerges as the times require, and it has formed complementary advantages with traditional cellular networks. Due to its great flexibility, low power consumption and flexible configuration, it has quickly gained attention in the communication industry. Become a common device in people's home communication scenarios. Due to the tidal effects commonly seen in the communication field, the all-weather, fully-powered home base station has improved the communication quality of people, but it also caused a great waste of resources. Based on the research of LTE technology and the principle of home base station equipment, this paper proposes an intelligent sleep algorithm based on BP neural network, which realizes the maximization of resource saving and ensures the communication quality of users.

# 第一章  绪论 

## 1.1 我国LTE技术及发展

在移动互联网飞速发展的近十几年里面，3G 移动通信的发展推动了移动数据业务和移动互联网应用的发展，而移动数据与移动互联网应用业务的发展又对移动带宽性能提出了更高的要求，这直接驱动了 LTE 技术与产业的发展。[1]

近年以来，随着移动互联网的兴起，我国乃至世界都迎来了接入通信网络流量爆炸的情况。中国拥有近 12 亿用户，是全球最大的移动市场。特别引人关注的是移动互联网普及率的增长率，在 2018 年底已达到 58%，在不到十年的时间内增长了三倍。因此，中国日益壮大的中产阶级群体越来越多地选择线上购物，导致本就巨大的国内电子商务市场体量愈加庞大，现金交易大大减少。中国拥有数百万精通技术的消费者，他们热衷于使用社交媒体和各种应用，因而对运营商提出了更高的网络性能要求。[2]

可以看到，较之于原来通信网络中的小流量、低速率的传输协议版本，人们对通信网络的快速稳定提出了更高的要求，这时候LTE网络便应运而生，在短短数年的时间内成为了现在服务大众最可靠最普及的通信网络。

## 1.2 家庭基站在近年的发展

随着LTE以及后来的LTE-A这些优秀的通信协议在行业内渗透以及大规模部署，极大地满足并刺激了人们对于移动互联网的需求，大范围的稳定通信部署接近完成，在地理范围上大多数地方都被LTE通信网络覆盖。但是同时也不得不面临新用户大规模涌入的问题，这对通信行业的有限的频谱资源提出了更高的要求，如何在合理的范围内应对随时间快速增长的移动数据业务，满足不断扩大的容量，成为了这些年通信领域不断探索的问题。

在迅猛增长的移动/无线业务需求中，室内场所吸收了超过60%的话音业务和 80%的数据业务。当前移动通信网运营状况也表明，移动用户有近70%的时间都处在室内场所，因此良好的室内无线数据服务将是未来移动通信网络获得成功的关键[3]。而这恰恰是宏基站的弱势所在，宏基站有着如下的一些问题:

1)宏基站信号存在一些不能覆盖到或者较为微弱的区域，从而造成了用户们的体验较差。根据中信证券的调研结果[4]，在用户对通信公司的投诉情况来看，无信号和信号质量差占投诉的比重高达 80%，说明解决弱覆盖、覆盖盲点，保证建筑密集区的信号质量为运营商首要、主要的问题。

2)热点区域不足。由于传统的宏基站的建设由于较为高昂的价格，并且在人口和建筑密集区假设基站设备的建设和维护成本过大，造成了热点分布不足的情况。

目前而言，如果仅凭宏基站在小区的部署，由于距离较远并且建筑的阻挡，用户往往得不到较为良好的优质通信质量，所以在室内部署较为快速稳定的通信系统，同时也要满足低成本、高覆盖率，成为了移动通信领域必须考虑解决的问题。

而家庭基站等一系列室内覆盖技术的出现便解决了这一问题，使得人们通过较为简单并且成本较低的方式安装一定的设备，便会接入稳定快速的通信网络。家庭基站因为本就是室内安装，所以宏基站覆盖不到的区域，家庭基站可以完美的覆盖，解决了宏基站面临的第一个难题；由于家庭基站的安装简单，成果低廉，而且体积也较小，可以方便在每家每户安装，也可以在热点不足的公众场合安装，有效的解决了宏基站面临的第二个问题。

## 1.3 家庭基站节能技术在国内外的发展

根据Gartner公司报告，通信行业CO2排放量占全球总排放量的2%，整个通信行业年耗电量已经超过200亿千瓦时，其中移动通信网络耗电量占绝大部分。[5]据统计，在移动通信网络中，基站的耗电量达到了90%；扩大到整个的通信运维环境中，基站的耗电量也达到了60%~70%,所以如何有效的降低基站的耗电量，在满足用户通信质量的情况下，最大化的节约电量，成为了现阶段通信领域最为关心的问题之一。

在国内，华中科技大学的易楞淦博士提出了基于认知无线电频谱管理的毫微微基站激励方法，北京邮电大学的张志才博士提出了基于Q学习的节能控制算法，重庆邮电大学的沈海强提出了一种基于马尔科夫模型的智能预测睡眠时间的技能控制算法，重庆工学院的代红英提出了一种基于负载预测的节能算法，。

在国外，Alcatel-Lucent公司的Imran Ashraf等人提出了一种基于用户接入预测算法来智能开关基站，Vrije Universiteit Brussel的Björn DEBAILLIE等人提出了通过减少家庭基站自身电路设备功耗达到节能的方法，University of Catania的Anna Dudnikova等人提出了基于分布式的自我改进的节能算法。

国内外的研究都达到了一定的节能效果，但是由于通信网络的复杂性，比如密集基站频率之间的干扰，人口流动的不确定性，在一定的场景下达不到较为理想的节能效果，至今仍是通信领域的一个热门研究领域。

## 1.4 本论文的解决思路以及结构安排

本文通过研究家庭基站密集场景下异构蜂窝网络，以及家庭基站工作的原理，提出了一种基于BP神经网络预测人们接入通信网络的模型，实现智能休眠的效果，极大的节省了设备的能耗。

第一章为绪论部分，主要对我国LTE技术的发展和成果做了一定的介绍，指出了目前LTE网络和家庭基站面临的问题，同时对节能技术在海内外的研究现状做了简述。

第二章为LTE系统原理介绍，并同时介绍了异构网络、密集网络在LTE中的应用，并且总结LTE网络在近年的发展，以及未来的发展趋势。

第三章为家庭基站原理的介绍，介绍了家庭基站的网络结构、接入方式以及无线资源管理等工作原理，同时对家庭基站进行仿真建模。

第四章为LTE家庭基站节能方案的具体提出、仿真以及验证，通过BP神经网络对人们接入通信的变化做出智能的判断，在接入量较少的时候，暂时休眠，达到节能的目的。

第五章为全文的总结，回顾自己文章中对家庭基站节能工作的思路和解决方法，指出了下一步可以改进的地方。

# 第二章  LTE系统原理介绍

## 2.1 LTE网络在近年的发展

### 2.1.1 LTE的概念以及设计目标

LTE网络的全称是长期演进（Long Term Evolution)，为3GPP组织主导的无线通信技术UMTS的长期演进。LTE项目于2004年启动，目标是为3GPP无线电接入技术的发展定制一定的框架，以实现通信网络的高速率、低延迟和数据包优化。

LTE技术演进之初，制定了一系列的设计目标：
- 带宽灵活配置：支持1.4MHz, 3MHz, 5MHz, 10Mhz, 15Mhz, 20MHz；
- 峰值速率更高：下行100Mbps，上行50Mbps ；
- 时延更小：控制面延时小于100ms，用户面延时小于5ms
- 支持高速：能为速度大于350KM/H的用户接入100kbps的业务接入
- 支持用户数增加:5M以上带宽，至少400UE/小区

### 2.1.2 LTE的标准化进程

制定出LTE方案之后，3GPP组织发布了一系列的release(Rel)，以更新LTE标准中的内容。下面选取几个比较重要的节点方案，简要说明一下其中内容：

1，Rel-8(2008年)
- LTE/SAE初始版本

2，Rel-9(2010年)
- 支持LTE Home eNodeB（无线基站）
- 增加自组织网络

3，Rel-10(2011年)
- 进化到LTE-Advanced
- 载波聚合
- 支持高阶MIMO

4，Rel-12(2015年)
- 进化到LTE-Beyond
- 支持LTE-Hi
- 支持智能天线波束赋形技术 

5，Rel-15(2018年)
- 5G接入

## 2.2 LTE网络架构及网元功能

LTE系统采用了E-UTRAN的分布式系统架构，完全由增强型Node B(enhanced NodeB)组成，直接取消了RNC(节点控制器)，避免了由之产生的单点故障，提高了网络的稳定性。

![](http://ww1.sinaimg.cn/large/006kDro9gy1g2ygetpdxhj30gt0dg75j.jpg)

LTE系统的网络架构如上图所示，主要由eNodeB与接入网关(Access GateWay,aGW)组成。eNB之间采用IP传输[?]，在逻辑上以X2接口互相连接，支持数据和信令的直接传输。且eNB以S1接口连接核心网(EPC),其中S1-MME连接到MME的控制面端口，S1-U连接到S-GW的用户面端口。

其中主要涉及的网元功能如下：
![](http://ww1.sinaimg.cn/large/006kDro9ly1g2rylbih45j30pv0iejw7.jpg)

与传统的通信网络相比，LTE的这种网络架构更加简单化、扁平化，不仅降低了组网的成本，而且也增加了组网的灵活性，并且可以大大降低通信时延。

## 2.3 LTE网络关键技术及其建模 

### 2.3.1 OFDMA原理与仿真

移动互联网演进的目标是构建出高速率、低时延并且分组优化的无线接入网络，为此，多址方案必须在复杂度合理的条件下，提供更高的数据传输速率和频谱利用率。下面给出从1G到4G的多址方案演进[6]：
![](http://ww1.sinaimg.cn/large/006kDro9ly1g2kmtp89euj30nj0au76t.jpg)

其中OFDM是一种调制方式，其利用正交子载波组来实现并行传输，可以获得很高的频谱利用率，其系统的基本模型如下：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2yfkdiag0j30pu08awgo.jpg)

我们假设串行数据流为$\left\{X_{0}, X_{1}, \cdots X_{k}, \cdots X_{N-1}\right\}$，经串并转换后变为$\left\{X_{0}\right\},\left\{X_{1}\right\}, \cdots\left\{X_{k}\right\}, \cdots\left\{X_{N-1}\right\}$，假设OFDM的富豪周期为$T$，每个子载波的传输频率用$f_{k}$表示，$k=0,1, \cdots, N-1$，则OFDM的发射端输出信号为：

$$x(t)=\sum_{k=0}^{N-1} X_{k} e^{j 2 \pi f_{k} t} rect(t)$$

由于子载波的间隔为$f=\frac{1}{T}$,故上式可以写作：
$$x(t)=\sum_{k=0}^{N-1} X_{k} e^{j 2 \pi \frac{k}{T} t} \operatorname{rect}(t)$$

在一个OFDM符号周期内对任意两个子载波进行积分，我们有：
$$\frac{1}{T} \int_{0}^{T} e^{-j 2 \pi \frac{n}{T} t} e^{j 2 \pi \frac{m}{T} t} d t=\frac{1}{T} \int_{0}^{T} e^{j 2 \pi \frac{m-n}{T} t} d t=\left\{\begin{array}{ll}{1} & {m=n} \\ {0} & {m \neq n}\end{array}\right.$$

上式说明了只有子载波匹配时，接收端积分的结果才不为0，充分的说明了各个子载波之间的正交性。

![](http://ww1.sinaimg.cn/large/006kDro9gy1g2yge6bcxfj311y0ic3zu.jpg)


利用MATLAB仿真结果如上，可以看到每个子载波在其中心频率处有最大值，而其余的载波为0，故使用抽样函数的进行抽样的时候不存在干扰；并且由于各个子载波之间有重合部分，所以较FDM在频谱利用率上有了一定的提升。

在接收端，我们只需要将第$L$个子载波乘以$e^{-j 2 \pi \frac{k}{T} t}$，之后在OFDM周期内进行积分，则可以恢复原信号：

$$Y_{L}=\frac{1}{T} \int_{0}^{T} e^{-j 2 \pi \frac{L}{T} t^{N-1}} X_{k} e^{j 2 \pi \frac{k}{T} t} d t=\frac{1}{T} \sum_{k=0}^{N-1} X_{k} \int_{0}^{T} e^{j 2 \pi \frac{k-L}{T} t} d t=X_{L}$$

OFDMA为一种多址接入方式，是OFDM技术的演进，在利用OFDM对信道调制之后，在部分子载波上加入传输信息的方法，增强用户服务质量。

其改进示意如下：
![](http://ww1.sinaimg.cn/large/006kDro9gy1g2yhc9v2dlj30ji07i78h.jpg)

### 2.3.2 MIMO原理与仿真

MIMO即多入多出技术，是一种多天线传输技术，发射端同时利用多个天线发射信号，接收端利用多个天线接受信号。由于收发两端使用了多根天线，故MIMO的信道容量较相同带宽的单收发链路有了成倍的提高。

我们假设MIMO系统中有$N$个发射天线以及$M$个接收天线，且设发射信号与接收信号分别为$x=\left[x_{1}, x_{2}, \cdots, x_{N}\right]$，$y=\left[y_{1}, y_{2}, \cdots, y_{M}\right]$，对于信号只有一条时间可分辨路径的瑞利平坦衰落信道而言，接收信号与发射信号的关系如下：
$$y(t)=H(t) x(t)+n(t)$$

上式中$n(t)$为加性高斯白噪声,$H(t)$为$M \times N$维的MIMO信道矩阵，$H(t)$矩阵具体如下：

$$H=\left[ \begin{array}{cccc}{h_{11}} & {h_{12}} & {\cdots} & {h_{1 N}} \\ {h_{21}} & {h_{22}} & {\cdots} & {h_{2 N}} \\ {\vdots} & {\vdots} & {\vdots} & {\vdots} \\ {h_{M 1}} & {h_{M}} & {\cdots} & {h_{M N}}\end{array}\right]_{M \times N}$$

其中$h_{ij}$为从第$i$个信道到第$j$个信道的衰减系数。

根据文献[]的建模，我们可知在等功率分配的情况下，MIMO的信道容量为：

$$C=\log _{2} \operatorname{det}\left[I_{N}+\frac{\rho}{N} H H^{H}\right]$$

对上式进行仿真，我们可得：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2yiclk6t1j311y0ic752.jpg)



### 2.3.3 ICIC介绍

由于LTE采取的是OFDM方式调制，将通信数据调制到正交的子信道上，从而使得单个小区干扰极大得减少。但是在不同的小区之间，干扰便比较严重，我们解决这个问题的方法除了传统的加扰、调频技术，还可以采用ICIC技术(小区间干扰协调)。

ICIC即将相邻的小区之间通过不同的频带划分，在频域上错开各自用户的资源，从而达到有效降低相邻小区的同频干扰。下面为示意图：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2knhuotabj30od05tmyj.jpg)



# 第三章  家庭基站的原理及应用

现代网络的容量扩展主要为两个方面，一为横向的小区分裂，增加宏基站数量；二为纵向的网络分层，基于新的频段，构建独立的网络与宏网络协调使用，其中家庭基站便采取了纵向网络分层的技术手段。

由于便于安装、方便灵活的特点，Femtocell往往被安装在用户家庭、办公室、公共区域内，直接接入宏蜂窝异构网络，形成了一系列的Femtocell-宏蜂窝异构网络。这样用户在进入常见的宏基站区域内的时候，会正常连入宏基站；而进入家庭基站覆盖的区域的时候，会直接连入Fetmocell。由此，用户在外出的时候可以享受到宏基站所提供的大范围、安全稳定的信号，在即使位置稍微偏僻的家中，依然可以接受快速稳定的网络。

## 3.1 家庭基站的网络结构

与我们生活中常见的宏蜂窝网络不同，因为家庭基站不需要(BSC)和移动交换中心(MSC)，家庭基站不通过运营商的专线接入核心网络，而是通过因特网直接接入核心网络的。下面给出Femtocell接入通信网络示意图：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2kusfzwjxj30jb0dqtac.jpg)

由于传统宏基站的接入方式为：用户发送信号至宏基站蜂窝网络，之后请求消息传输到RNC进行认证、付费等处理，之后进行认证。如果认证成功，授权为合法用户后，其请求经由运营商的核心网络，到达所请求的互联网数据，之后再返回到用户的请求设备上。这样便给运营商的核心网络带来了巨大的负担和压力，对于快速增长的移动互联网用户，核心网络已经不能再满足用户的需要。

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2kv1axyj9j30kz0bbab8.jpg)

与传统宏基站不同，家庭基站只有在认证等信令达到运营商的核心网络，之后流量直接通过Femto网关连入互联网，故其流量不经过传统运营商的核心网，大大减轻了核心网络的负担，缓解了运营压力的同时，也使用户获得了较宏基站更为稳定快速的网络。如下图所示:
![](http://ww1.sinaimg.cn/large/006kDro9ly1g2rcm51ahlj30on0f9q51.jpg)

## 3.2 家庭基站接入核心网的解决方案

Femtocell系统在完整的结构中分为两个部分，其中包括家庭端的Home eNodeB(HNB)和Femto网关。我们常说的家庭基站(Femtocell)即Home eNodeB(HNB)部分，而Femto网关为HNB经过IP连入因特网的认证、授权部分。

典型的Femto接入网络如下：
![](http://ww1.sinaimg.cn/large/006kDro9ly1g2re4gs0o6j30km083zkl.jpg)
![](http://ww1.sinaimg.cn/large/006kDro9ly1g2rooawgaoj30s607fgml.jpg)

HNB为用户自行安装的设备，其通过公共IP(Internet协议)使用luh接口连接到HeNB GW(Femto网关)，HeNB GW再通过lu接口连接到运营商的核心网。

从运营商的核心网络的角度来看，HeNB接入网为RNC（无线网络控制）；而从用户的角度而言，HeNB接入网为eNodeB，家庭基站与用户之间采用标准的Uu接口进行通信。所以，家庭基站既拥有了宏基站eNodeB的无线承载功能，向用户终端提供标准的Uu接口；同时又拥有了RNC的无线资源管理功能，使得整体网络结构更加扁平化，提高了网络传输效率，同时也降低了维护成本，也使得扩展业务更为方便。

在家庭基站网络中，较原有的宏基站网络新增了两个实体，分别为HeNB GW和Se GW。其中，HeNB GW为家庭基站的网关，将多个HNB业务聚集在一起，之后通过S1标准端口传送给核心网络。HeNB GW主要负UE注册、HNB注册、链接管理等业务。Se GW为家庭基站的安全网关，主要负责安全通道的建立。

其完整的架构如下所示：
![](http://ww1.sinaimg.cn/large/006kDro9ly1g2rq04doh3j30n60dndic.jpg)

如图所示，HNB可以有两种方式接入运营商核心网络，一种为直接与MME相连；另一种为通过HeNB GW相连，继而再连接到MME上。两种方式都通过S1-MME接口与核心网络进行通信，所以本质上是一样的，我们可以在一定程度上将HeNB GW视为虚拟的MME。

家庭基站通过上述方式接入核心网络，使得网络结构扁平化，符合下一代通信网络扁平化的趋势。由于网络节点的减少，在整体上减小了时延，从而改善了用户使用网络的体验，同时也增强了网络的可靠性。

## 3.3 家庭基站的用户接入方式

因为Femtocell的接入方式直接与无线资源管理相关，而Femtocell又有不同的接入方式，所以针对每种不同的接入方式提出相对应的算法以优化，可以有效的解决不同的问题，使得用户的使用体验更好。

与其他的室内无线接入方式类似，Femtocell将用户分为两种，一种为注册用户，另一种为非注册用户。而问题的重点便在于，非注册用户是否被网络视为非法用户，拒绝接入。而且不同的接入方式会产生不同的干扰影响，对整体的网络性能影响较大，故选择适当的用户接入方式对家庭基站的使用有着至关重要的影响。

家庭基站的用户接入一般分为以下三种，分别为：
1）闭环接入方式：其中家庭基站的拥有着用户定义一个合法的用户集合，只有其中的用户可以接入通信网络；
2）开环接入方式：所有的人都可以接入网络，不存在接入门槛；
3）混合接入方式：将闭环接入用户未使用的资源给给未注册用户，达成资源共享使用模式；

其中的闭环接入方式限制了宏蜂窝用户使用Femtocell的资源，但是也带来了干扰抑制的复杂问题；开环接入方式虽然没有干扰过重的问题，但是开放式的资源获取方式给网络带来了不安全因素，也会影响到Femtocell拥有者的使用体验；混合接入方式结合了开环接入和闭环接入两种接入方式，是目前认为最为有效的方法。但是仍要设计出优秀的算法，解决资源分配的问题，避免Femtocell拥有着用户的资源分配出现问题，使得网络体验较差。

## 3.4 家庭基站的无线资源管理

在家庭基站满足了安装方便且可以稳定提供高质量服务的同时，仍要必须考虑与原有宏基站的兼容，即干扰问题。干扰会对Femtocell的系统性能产生极大的影响。而与干扰问题联系最为密切的即Femtocell的资源分配方式，只有将资源分配问题予以解决，与宏基站互相补足，家庭基站才有使用的价值。

假设某区域内有$N$个用户在使用通信服务，其中空间的可用带宽被划分为$M$个子信道,设矩阵$L$便是此$N$个用户使用$M$个信道的情况，矩阵$B$为定效益矩阵，则有：
$$L=\left[ \begin{array}{cccc}{a_{11}} & {a_{12}} & {\cdots} & {a_{1 M}} \\ {a_{21}} & {a_{21}} & {\cdots} & {a_{2 M}} \\ {\vdots} & {\vdots} & {\cdots} & {\vdots} \\ {a_{N 1}} & {a_{N 1}} & {\cdots} & {a_{N M}}\end{array}\right]，B=\left[ \begin{array}{cccc}{b_{11}} & {b_{12}} & {\cdots} & {b_{1 M}} \\ {b_{21}} & {b_{21}} & {\cdots} & {b_{2 M}} \\ {\vdots} & {\vdots} & {\cdots} & {\vdots} \\ {b_{N 1}} & {b_{N 1}} & {\cdots} & {b_{N M}}\end{array}\right]$$

其中$a_{ij},(i \in(1,N), j \in(1,M))$，$a_{ij}$取1或0，表示第$i$用户是否使用第$j$个信道；$b_{i j},(i \in(1, N), j \in(1, M))$，$b_{ij}$取$[1,5]$，取值越大代表服务质量越好。

则对于系统整体服务质量的评价，可以将用户在所有信道上的服务质量相加即可：
$$F(x)=L*B=\sum_{i=1}^{N} \sum_{j=1}^{M} a_{i j} b_{i j}$$

为了使上式的总和达到最优化，在此我们使用论文4.3中家庭基站模型，采用文献[9]中提出的Femto-Aware方法进行优化。本方法将小区中可能使用的频谱划分为两个部分，**宏基站专用部分(干扰池)**与**宏基站与家庭基站共享部分**，宏基站通过识别对Femtocell上行链路具有潜在威胁的UE，并且将他们的频谱转移到宏专用部分，使得Femtocell处不存在可能的同信道干扰。

根据文献[9]的说明，我们可以使用UE报告的子载波的CQI(信道质量指示)来完成这种识别，其中CQI可以表示为$Y_{CQI}=a_{ij}*b_{ij}$：如果UE在Femtocell附近且接入了共享频谱，则其CQI相对专用频谱中的子载波较低，我们则将其纳入干扰池中。

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2yvnlqcl1j31e00rsach.jpg)

根据仿真结果，我们可以得出：相对与不做任何限制的情况，用户的通信质量得到了明显的提升。

## 3.5 小节
在第二章论文介绍了LTE系统的原理与其核心技术的仿真，第三章论文介绍了Femtocell家庭基站的原理，且对Femtocell进行了无线资源管理的模拟仿真，本章文章将在二、三章的基础上，对LTE家庭基站的节能管理进行研究。

# 第四章  LTE家庭基站的节能方案

根据论文的第一章1.3节的介绍，Femtocell在通信领域满足了低功耗、低成本且用户灵活部署的特点。不过由于通信领域普遍存在的潮汐效应，即随着时间通信的吞吐量会产生大尺度的变化，比如中午与深夜的接入量会呈现出数十倍的差距。但是在日常生活中，用户经常自行安装家庭基站之后进行全天候全功率的开放，造成了资源的极大浪费。故运营商在Femtocell网络中计划加入自动配置与自我优化的功能，以动态地调节网络，节约资源。

文章计划采用BP神经网络模型，对一个小区的家庭基站的接入情况进行智能的预测，在接入点较少的时间进行有选择的睡眠，避免资源的浪费，达到节能的目的。


## 4.1 LTE家庭基站节能管理的相关概念

### 4.1.1 家庭基站的硬件构成

家庭基站的节能方法与通信网络中大多的节能方法类似，均使用能效量度准则进行刻画，其准则可以综合的刻画通信网络的性能。能效量度准则一般可以分为三个等级：器件级、设备级、网络级，我们在此节重点介绍家庭基站器件级的功耗。

家庭基站在元器件级的能量与其组成元件相关，具体元件如下图所示[10]：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2yxy6da8kj30mw0b63zd.jpg)

上图显示了一个典型的Femtocell硬件设计的示意图。它包括一个微处理器，负责实现和管理无线电协议栈和相关的基带处理；一个或多个随机存储器连接到微处理器，处理各种数据处理；还包括现场可编程门阵列(FPGA)和一些集成电路，实现数据加密、硬件认证等功能；FPGA中的无线电组件充当微处理器和射频收发器(RF)之间的接口，还有RF功率放大器(PA)，将高功率信号传递到发射天线。

其中每个元器件的能耗如下：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2yy3a1v6hj30em06c74x.jpg)

从表格中得出，Femtocell完全激活后，硬件总消耗为$P_{act}=10.2W$。

### 4.1.2 节能策略概述

由于传统的基站预测休眠技术使用确定的流量模型，无法较为准确地对实际流量变化进行动态适应，故本文针对家庭基站中密集网络的研究现状进行分析，提出一种基于业务预测(service-prediction- based green base-station sleep,SGBS)的绿色基站休眠策略。SGBS策略分为两部分，第一部分提取运营商下家庭基站的真实吞吐量进行BP神经网络的预测和结果分析，第二部分根据业务的预测结果制定了节能策略。

其中论文使用了文献[11]的初始数据，作者统计了中国某地区繁华街道数十天的Femtocell吞吐量检测数据，其中十天内具体的数据图示如下：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g2zy8hb3qaj311y0gyta5.jpg)


## 4.2 BP神经网络的介绍

1986年，Rumelhart和McCelland在文献[12]中提出了BP(Back Propagation，反向传播)神经网络，它是一种按照误差逆传播算法来训练的多层前馈网络，也是目前最常使用的人工神经网络模型之一。其中BP神经网络的核心思想为，利用输出层的误差来估计输出前导层的误差，之后依次估计更前一层的误差，一层层前移直到得出所有误差的结果,故称之为反向传播神经网络。本节从人工神经网络的三个要素来分析BP神经网络,分别为网络拓扑结构、传递函数以及学习算法。


### 4.2.1 BP神经网络的网络结构

BP神经网络为多层前馈网络，前馈网络中各层神经元分成不同的组，每一组均被视为一个神经层，每一层都接受前一层的信息并传递给下一层。而BP神经网络的主要特点为信息前向传递，误差反向传播，且属于有监督学习(Supervised Learning)模型。

![](http://ww1.sinaimg.cn/large/006kDro9ly1g305w26nnnj30gc0auta1.jpg)

上图为一个典型的三层BP神经网络，分别为输入层、隐含层以及输出层。BP神经网络的流程可以概述为：在前向传递中，信号经输入层、隐含层、输出层逐层处理并传递，检查预测输出与给定输出之间的误差，若没有达到精度要求，则转入反向传播，根据检测到的误差来调整输入层与隐含层，隐含层与输出层之间的权值和阈值，从而使预测输出不断逼近地期望输出[13]。

### 4.2.2 BP神经网络的前向传递规则

![](http://ww1.sinaimg.cn/large/006kDro9ly1g306z84p1yj30ec06dwer.jpg)


为计算整个BP神经网络的输出，我们在上图的三层网络中那选取其中的一层隐藏层作为当前神经元进行说明，以说明BP神经网络前向传递的原理。设神经元数量为$n$，令与其相连的前神经元的互信息强度为$W_{i}$，且当前神经层的阈值为$b$，$\sum_{i=1}^{n} W_{i} x_{i}$为当前神经层的输入，故当前神经元输出为：

$$y=f\left(\sum_{i=1}^{n} W_{i} x_{i}+b\right)$$

其中$i=1,2,3, \ldots, n$，非线性$f(\cdot)$为激活函数。

推广到BP神经网络一般性结论，我们设输入向量为$X$为输入矩阵，$W$为权重矩阵，用$Z$表示神经层输入，$Y$为神经层输出则有：

$$Z^{i+1}=W^{i+1} X^{i}+b^{i+1}$$

$$X^{i+1}=f\left(Z^{i+1}\right)$$

根据通用逼近定理：如果一个前馈神经网络有输出层和至少一个隐含层，只要神经元数量足够，则其可以逼近任意连续函数函数。反应在BP神经网络中，其利用激活函数来模拟输入与输出之间的关系，激活函数的主要作用为提供给了神经网络的非线性建模的能力。函数必须满足连续可导的条件，理论上任意满足此条件的函数均可作为激活函数，但是我们在实际应用中，常常选择sigmoid函数作为激活函数：

$$f(x)=\frac{1}{1+e^{-x}}, 0<f(x)<1$$

其图像如下：![](http://ww1.sinaimg.cn/large/006kDro9ly1g30od8dz84j311y0icmxo.jpg)

### 4.2.3 BP神经网络的反向传播规则

在神经网络中我们需要大量的参数以调整网络，以获取效果较好的输出。仅仅采用手工的输入，不仅输入量较大而且结果十分不准确，故我们需要一个高效快速的办法来求解参数，在BP网络中我们使用反向传播算法来解决这一问题。

在BP神经网络中我们常采用梯度下降算法来协助进行反向传播，通过在训练过程中不断地选择最优的参数值，使得损失函数达到最小。BP神经网络的前向传递与反向传播概念具体如下图所示：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g324vze9c2j30hk05mmxe.jpg)

BP神经网络的目的为将输出值与期望值之间的误差平方和达到最小，对于一个具有多输出的BP神经网络而言，我们需要对所有误差项进行求和，为此我们假设构建一个代价函数以描述这种关系：

$$J(W, b ; x, y)=\frac{1}{2}\left\|h_{w, b}(x)-y\right\|^{2}$$

其中$W$为权重向量，$b$为偏置，$y$为期望输出，$h_{w,b}(x)$为实际输出。BP网络的目标为更新$W$与$b$的值达到最小化代价函数的目的，$W$与$b$的更新算法我们采用梯度下降算法，具体规则如下：

1，**输入**：为BP神经网络添加相应的输入值；
2，**前向传播**：对$l=2,3, \dots, L$各层计算相应的输出：

$$z^{l}=w^{l} a^{l-1}+b^{l}$$$$a^{l}=\sigma\left(z^{l}\right)$$

3，**计算输出层误差$\delta^{L}$**：

$$\delta^{L}=\nabla_{a} C \odot \sigma^{\prime}\left(z^{L}\right)$$

4，**反向误差传播**：对$l=L-1, L-2, \dots, 2$各层，计算其误差有：

$$\delta^{x, l}=\left(\left(w^{l+1}\right)^{T} \delta^{x, l+1}\right) \odot \sigma^{\prime}\left(z^{x, l}\right)$$

5，**使用梯度下降算法来更新参数**：对于$l=L-1, L-2, \ldots, 2$各层，根据一下规则更新权重与偏置：

$$w^{l} \rightarrow w^{l}-\frac{\eta}{m} \sum_{x} \delta^{x, l}\left(a^{x, l-1}\right)^{T}$$$$b^{l} \rightarrow b^{l}-\frac{\eta}{m} \sum_{x} \delta^{x, l}$$

在实际操作中，我们可以使用多次的前向传递与误差反向传播来使得代价函数值达到最小，使得网络整体符合我们的要求。具体的网络训练示意图如下所示:

![](http://ww1.sinaimg.cn/large/006kDro9ly1g326938zcjj30ej0h0wfc.jpg)

 
## 4.3 基于BP神经网络的家庭基站吞吐量预测

本文利用BP神经网络模型根据家庭基站的历史流量，对家庭基站流量进行动态的预测，之后根据4.4节制定的策略决定家庭基站是否进入休眠模式，从而达到节能的目的。文章首先对数据进行预处理，再搭建BP神经网络模型，之后利用家庭基站历史流量对其进行训练，在达到预设误差后结束训练，最后基于此模型进行预测。

### 4.3.1 流量数据预处理

流量数据预处理即数据归一化，其目的是将数据通过一定的变换以缩小范围。我们通过将有量纲的数值转换为无量纲数值，在处理数据方便的同时也加快了收敛的速度。

在本论文中，由于信号为连续线性函数，我们采用线性函数归一化方法，其在Matlab中所用的函数为mapminmax。

### 4.3.2 BP神经网络的构建

BP神经网络的构建是指对网络层数以及隐含层的确定，以及各个神经层的各节点的确定，下面论文结合家庭基站流量对具体的数量进行确定。

(1)网络层数的选择

任何一个神经网络均必须有输入层和输出层，网络层的确定主要在于隐含层数目的确定。隐含层数目主要取决于预测数据本身的复杂度，对于复杂的映射关系，我们使用多神经元与多隐含层进行构建；而对于较为简单的映射关系，我们只需要使用单隐含层，这样在满足训练精度的同时也加快了训练时间。

由于通信流量的复杂度并不高，本文中选择使用单隐含层，即为三层BP神经网络结构。

(2)输入输出节点的选择

论文中我们使用了文献[11]中的数据，将十二天的流量数据分为四组，每组三天作为输入层的输入数据，其输出为一天的预测流量。故网络的输入神经元数量为4个，输出神经元数量为1个。

(3)隐含层节点的选择

神经网络中最为核心的部分即为隐含层，隐含层节点的数量选取对整体网络结构至关重要。如果隐含层节点数量过多，则会加大训练时间，容易过拟合；而隐含层节点数量过少，则可能导致训练精度不高。

其隐藏层节点可以参考文献[14]来确定：

$$N=[\sqrt{2 n+m}, 2 n+m]$$

其中$n$为输入层神经元数量，$m$为输出层数量，计算出本文的隐藏层节点范围为$[3,9]$，在此我们选择5为其具体数目。

综上所述，论文的网络结构图示如下：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g32erdgupej30iz09xdgr.jpg)

体现在Matlab中，网络结构如下所示：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g32gy5a26tj30cg03naa7.jpg)

### 4.3.3 BP神经网络的训练过程

本节在上节BP神经网络的网络结构之上，分析网络训练过程中的具体参数。

(1)训练参数的选择

BP神经网络训练过程中涉及诸多的参数，比如最大训练参数、最小均方误差、学习率等，这些参数对于网络的训练过程至关重要，关系到训练精度与时间问题。

- 迭代次数

迭代次数是指网络最大的训练次数，此数值必须使得网络收敛，达到预期的误差精度。

- 学习率

学习率的作用体现在梯度下降过程，不断地修正权值。其在$[0,1]$内取值，但是注意不能设置过小，否则会导致网络收敛速度过慢，但设置过大的时候会导致权值震荡无法收敛。

- 学习目标

学习目标即为我们希望网络训练收敛到的误差精度。

在此我们将迭代次数设置为1000，学习率为$10^{-10}$，学习目标为$10^{-2}$。

(2)训练模式的选择
Matlab神经网络工具箱中的训练函数均为批变模式，批变模式中全部的输入加入网络后会更新权重，此种模式可以加快训练速度。

(3)神经网络中函数的选择

在本文的BP神经网络中，隐含层的传递函数为tansig，输出层的传递函数为purelin，训练函数为采用梯度下降算法的traingd。

其中tansig函数为：

$$\tan \operatorname{sig}(n)=\frac{2}{1+e^{-2 n}}-1$$

其图像为:

![](http://ww1.sinaimg.cn/large/006kDro9ly1g32gluop3oj311y0icmy4.jpg)

其具体的训练过程数据如图所示：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g32h1vi5csj30bx039t8m.jpg)

### 4.3.4 BP神经网络的预测结果

所训练模型的预测结果与实际发生的数据对比如下图所示：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g33aqamivhj311y0cxjsf.jpg)

其绝对误差图示如下：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g33aqpqlg6j311y0d1gm5.jpg)

可以通过上图看出，本论文的方法对家庭基站的流量变化做出了较为成功的预测，在误差允许的范围内，基于BP神经网络的方法可以在实际的预测中取得显著的结果。

综上所述，基于BP神经网络进行家庭基站流量预测的整体流程如下：
![](http://ww1.sinaimg.cn/large/006kDro9ly1g326qqt6q5j30ft0gvq3s.jpg)

## 4.4 基于流量预测的家庭基站节能策略

在4.3节对家庭基站流量做出了成功的预测之后，我们以此为基础来制定相应的策略，并且进行仿真以进行验证。

### 4.4.1 家庭基站节能策略

基于BP神经网络的预测结果，本文制定了一个基于业务预测的家庭基站节能策略。

由图[*]可以清楚的看到通信网络中的潮汐效应，在此天$0-6$时间段，流量使用量较少，这也与人们日常的经验相符合。不过由于人们生产活动的不确定性，这个时间段每天都可能进行相应的调整，在上节之中我们使用BP神经网络成功的预测出了其变化情况，解决了这一问题。不过仍然存在突发情况，需要我们在预测中应关闭的时间段开启家庭基站。在此，我们制定以下策略，来完备我们的节能策略。

(1) 家庭基站休眠规则

首先，我们借助4.3节所预测的家庭基站在$T$时刻的吞吐量$TH_{f}^T$,为了归一化我们的睡眠阈值，我们定义一个家庭基站吞吐率$TH_f$，其等于预测吞吐量与最大容量$C_{f}$的比值:

$$T H_{f}=\frac{T H_{f}^{T}}{C_{f}}$$

论文定义了Femtocell休眠的阈值$\alpha$，其作用为判定Femtocell是否将其置为休眠模式。其策略被定义为：

$$T H_{f} \leq \beta,Slepp \ Mode\\
T H_{f}>\beta,Active \ Mode$$

结合文献[10]中的数据流量，在本文中将$\beta$设置为0.3，即该策略具体为：

$$\left\{\begin{array}{ll}{T H_{f} \leq 0.3} & {Slepp \ Mode} \\ {T H_{f}>0.3} & {Active \ Mode}\end{array}\right.$$

在利用BP神经网络预测出具体的吞吐量后，将数据归一化并且使用吞吐率表示出，与休眠阈值$\beta=0.3$进行比较，如是低于此数值，按照本节(3)中的具体策略进行休眠。

(2) 家庭基站唤醒规则

根据我们的基站状态切换规则，当Femtocell的预测吞吐量$TH_{f}$小于$\beta$时，即将其休眠，将家庭基站用户转交给宏基站。但是此种方案存在一个问题，即在用户由于特殊情况在休眠时间段进行通信时，由于宏基站可能会噪声较大，使得用户的通信体验较差。在这里文章在预测基础上提出了一种节能策略，使方案完备。

在此方法中，我们根据文献[10]中的家庭基站与宏基站协作的方式，进行此方案的优化。我们使用家庭基站中的嗅探模块，对宏基站对连入用户的下行无线链路通信质量进行监测，以SINR(信号与干扰加噪声比)为标准，进行信号质量好坏的判定。

根据文献[15]中的LTE质量评估模块中SINR的计算公式有：

$$S I N R[k]=1 / N_{R} N_{0} \sum_{i=1}^{N_{T}}\left(H^{H}[k]^{*} H[k]\right)_{j, j}, k=1, \ldots N_{s c}$$

在文献[16]中，我们得知通信系统中信号质量判定中，SINR为:

![](https://usatcorp.com/wp-content/uploads/2016/06/lte-singal.png)

即在SINR小于7db时，信号质量较差。

文章将基站唤醒规则指定为：在家庭基站休眠过程中，利用嗅探模块实时监测宏基站与用户通信的下行链路，并且计算其SINR，当其小于7db，即用户的通信质量较差的时候，开启家庭基站，将用户从宏基站转接到家庭基站。

(3) 家庭基站节能策略完整流程

结合(1)(2)中家庭基站的休眠与唤醒规则，我们可以将整体的流程使用流程框图归纳如下：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g33moz966gj30go0t6abu.jpg)

(4) 家庭基站节能方案验证    

在休眠模式中我们对家庭基站并未完全关闭，而是对发射信号的相关模块进行了关闭，其他模块处在通电状态以便在唤醒中快速的执行通信任务。

我们将$P_{saved}$定义为通过使基站进入休眠模式后节约的功耗，$\eta$定义为节能的百分比：

$$\eta=\frac{P_{saved}}{P_{act}}$$

而在休眠过程中，我们对射频功率放大器(RF Power Amplifier)、射频发射器(RF Transmitter)、射频接收器(RF Receiver)以及一些非必要硬件(比如数据加密、硬件认证部分)进行关闭，同时对嗅探器(radio sniffer)进行开启。则$P_{saved}$计算如下：

$$\begin{aligned} P_{\text {saved}} &=P_{P A}+P_{T X}+P_{R X}+P_{\text { misc }}-P_{\text {sniff}} \\ &=2.0+1.0+0.5+1.0-0.3=4.2 \mathrm{W} \end{aligned}$$

故我们有:

$$\eta=\left(\frac{4.2}{10.2}\right) \cdot 100=41.2 \%$$


### 4.4.2 节能策略结果仿真

论文最终部分对家庭基站节能策略进行验证仿真，其中家庭基站模型如下：

- LTE系统带宽 20MHZ
- 宏基站载波频率 2GHZ 
- 家庭基站最大功率 10.2W
- 家庭基站信号范围 20M
- 家庭基站用户数 10
- 宏基站内家庭基站数量 1

论文模型假设为一小区模型($20\times 20 m^2$)，其中用户位置为随机确定，利用Matlab建模后图示如下：

![](http://ww1.sinaimg.cn/large/006kDro9ly1g33iyfwgwuj311y0d9wgg.jpg)

而用户接入此网络的概率为泊松分布，其由于位置随机分布，故接收到信号较差的概率亦相同，假设此概率为一区间常数$\xi$，则$k$个用户连入基站并接收到较差信号的概率可以表示为：

$$P(X=k) \rightarrow \xi\frac{\lambda^{k}}{k !} e^{-\lambda}, k=0,1, \cdots$$

假设$\xi \in [0,0.2]$，$\lambda = 3$,即在$[0~5]$时间段区间内接入网络的人数期望为$3$，而且其信号较差的概率区间为$[0,0.2]$。

![](http://ww1.sinaimg.cn/large/006kDro9ly1g33kq70to1j311y0icdgk.jpg)

上图为家庭基站在10天内的功耗示意图，分别为不适用节能策略、使用了本文基于业务预测的绿色家庭基站休眠策略的基站功耗。由图中可知，节能效果较为显著，

# 第五章 总结

本论文中，第二章进行了LTE系统的介绍，并对其关键技术做了仿真；第三章进行了家庭基站的原理的介绍，且对与其无线资源管理技术做了研究与仿真；第四章首先利用BP神经网络对家庭基站的系统吞吐量做预测，得到了未来时间段的预测值，并提出了相应的节能策略，通过系统的仿真，确定该方法显著的降低了系统的能耗，在保证用户的通信质量的前提下，有效的实现了家庭基站的节能环保。

# 附录
[1]:TD-LTE 产业发展白皮书(2012) (http://www.tdia.cn/wp-content/uploads/2016/10/baipishu.pdf)

[2]:中国移动经济发展（2019） （https://www.gsmaintelligence.com/research/?file=f3b217bd4616654f710854b0735b0c00&download）

[3]:两层异构网络中femtocell研究进展与展望 肖竹

[4]:从4G+到5G：小基站，大未来

[5]:LTE绿色节能解决方案

[6]:Lte 基本原理和关键技术介绍

[7]:Femtocell网络的异构性的研究 章宦乐

[8]:MIMO系统信道容量与传输性能仿真研究 徐献灵

[9]:A Novel Spectrum Arrangement Scheme for Femto Cell Deployment in LTE Macro Cells，Yi Wu

[10]:Improving Energy Efficiency of Femtocell Base Stations via User Activity Detection，Imran Ashraf

[11]:Femtocell 中基于负载预测的基站休眠节能方案 代红英

[12]:Learning representations by back-propagating errors,Rumelhart

[13]:基于BP神经网络的交通流量预测 曹虹

[14]:MATLAB神经网络30个案例分析

[15]:LTE-A系统中无线链路监测算法研究与实现

[16]:Understanding LTE Signal Strength Values(https://usatcorp.com/faqs/understanding-lte-signal-strength-values/)